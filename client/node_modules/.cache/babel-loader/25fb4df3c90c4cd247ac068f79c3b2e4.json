{"ast":null,"code":"var _jsxFileName = \"/home/zhadyra/qazaq_aspap/client/src/pages/tuner/components/Dombyra/dombyra.jsx\",\n  _s = $RefreshSig$();\nimport { PitchDetector } from \"pitchy\";\nimport { useEffect, useState, useRef } from \"react\";\nimport './style.css';\nimport { Dock } from \"../Dock/dock\";\nimport { BackWaves } from \"../BackWaves/back-waves\";\n\n// import { useWindowSize } from \"../../hooks/useWindowsSize\"\n\nimport { tunerValue } from \"../../../../firebase\";\n\n// let position = \"30%\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet global = 100;\nlet minClarityPercent = 95;\nlet [minPitch, maxPitch] = [60, 10000];\nconst absThr = 0.5;\nconst nAbsThr = -1 * absThr;\nconst threshold = 1;\nconst nthrshld = -1 * threshold;\nconst audio = new Audio(\"tuner.mp3\");\nconst playAudio = async () => {\n  try {\n    await audio.play();\n    console.log(\"Playing audio\");\n    tunerValue.set(\"Alright!\");\n  } catch (err) {\n    console.log(\"Failed to play, error: \" + err);\n    tunerValue.set(\"Failed to play, error\");\n  }\n};\nlet c = 0;\nlet boolzhan = true;\nexport const Dombyra = () => {\n  _s();\n  // const {width, height} = useWindowSize();\n\n  // console.log(height)\n  // const [pitch, clairty, ] = useInstrument(...);\n  const [pitch, setPitch] = useState(0);\n  const [clarity, setClarity] = useState(0);\n  const [note, setNote] = useState(\"G\");\n  const [diffG, setDiffG] = useState(0);\n  const [diffD, setDiffD] = useState(0);\n  const [position, setPosition] = useState(\"calc(50% - 3px)\");\n  const updatePitch = (analyserNode, detector, input, sampleRate) => {\n    analyserNode.getFloatTimeDomainData(input);\n    const [pitch, clarity] = detector.findPitch(input, sampleRate);\n    const matchesConditions = pitch >= minPitch && pitch <= maxPitch && 100 * clarity >= minClarityPercent;\n    if (matchesConditions) {\n      const frq = Math.round(pitch * 10) / 10;\n      // console.log((Math.abs(frq - global)));\n\n      if (Math.abs(frq - global) < 200) {\n        setPitch(frq);\n        setDiffG(frq - 195.9977);\n        setDiffD(frq - 146.8324);\n        setClarity(Math.round(clarity * 100));\n        global = frq;\n      } else {\n        // console.log(\"difference is too much\");\n      }\n    }\n\n    // setTimeout(() => updatePitch(analyserNode, detector, input, sampleRate), 150);\n    // return () => {\n    // console.log(\"RETURNED\")\n    // clearTimeout(interval)\n    // }\n  };\n\n  useEffect(() => {\n    // const audioContext = new window.AudioContext();\n    // const analyserNode = audioContext.createAnalyser();\n    let interval;\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      const audioContext = new window.AudioContext();\n      const analyserNode = audioContext.createAnalyser();\n      audioContext.createMediaStreamSource(stream).connect(analyserNode);\n      const detector = PitchDetector.forFloat32Array(analyserNode.fftSize);\n      const input = new Float32Array(detector.inputLength);\n\n      // global = detector.findPitch(input, audioContext.sampleRate)[0];\n\n      interval = setInterval(() => {\n        updatePitch(analyserNode, detector, input, audioContext.sampleRate);\n      }, 150);\n    });\n    return () => {\n      console.log(\"RETURNED\");\n      tunerValue.set(\"RETURNED\");\n      clearTimeout(interval);\n    };\n  }, []);\n  let dColorClass = note === \"D\" ? \" green\" : \"\";\n  let gColorClass = note === \"G\" ? \" green\" : \"\";\n  useEffect(() => {\n    let timeout;\n    if (note == \"G\" && diffG) {\n      // console.log(\"in G\")\n      // console.log(diffG)\n      const absDiff = Math.abs(diffG);\n      // console.log(\"G[ \" + absDiff + \" ]\")\n      if (absDiff <= absThr) {\n        // console.log(\"in G exact\")\n        setPosition('calc(50% - 3px)');\n        if (boolzhan) {\n          playAudio();\n        }\n      } else if (diffG < nAbsThr && diffG > nthrshld) {\n        // console.log(\"in G near LESS\")\n        setPosition(`calc(50% - 3px - 5px - ${parseInt(absDiff, 0)}px)`);\n      } else if (diffG > absThr && diffG < threshold) {\n        // console.log(\"in G near MORE\")\n        setPosition(`calc(50% - 3px + 5px + ${parseInt(absDiff, 0)}px)`);\n      } else if (diffG <= nthrshld) {\n        // console.log(\"in G LESS\")\n        setPosition(`calc(50% - 3px - 10px - ${parseInt(absDiff, 0)}px)`);\n      } else if (diffG >= threshold) {\n        // console.log(\"in G MORE\")\n        setPosition(`calc(50% - 3px + 10px + ${parseInt(absDiff, 0)}px)`);\n      }\n    }\n    if (note == \"D\" && diffD) {\n      // console.log(\"in D\")\n      // console.log(diffD)\n      const absDiff = Math.abs(diffD);\n      // console.log(\"D[ \" + absDiff + \" ]\")\n      if (absDiff <= absThr) {\n        // console.log(\"in D exact\")\n        setPosition('calc(50% - 3px)');\n        // changeLineColor();\n        if (boolzhan) {\n          playAudio();\n        }\n\n        // clearTimeout(timer);\n\n        // lineColorClass = \"\";\n      } else if (diffD < nAbsThr && diffD > nthrshld) {\n        // console.log(\"in D near LESS\")\n        setPosition(`calc(50% - 3px - 5px - ${parseInt(absDiff, 0)}px)`);\n      } else if (diffD > absThr && diffD < threshold) {\n        // console.log(\"in D near MORE\")\n        setPosition(`calc(50% - 3px + 5px + ${parseInt(absDiff, 0)}px)`);\n      } else if (diffD <= nthrshld) {\n        // console.log(\"in D LESS\")\n        setPosition(`calc(50% - 3px - 10px - ${parseInt(absDiff, 0)}px)`);\n      } else if (diffD >= threshold) {\n        // console.log(\"in D MORE\")\n        setPosition(`calc(50% - 3px + 10px + ${parseInt(absDiff, 0)}px)`);\n      }\n    }\n  }, [note, diffG, diffD]);\n  const pointerRef = useRef();\n  const originRef = useRef();\n  const isInRange = () => {\n    if (pointerRef.current && originRef.current) {\n      const pointer = pointerRef.current.getBoundingClientRect();\n      const origin = originRef.current.getBoundingClientRect();\n\n      // return ((pointer.left + 3) == (origin.left + 1));\n\n      return pointer.left + 1.5 < origin.left && pointer.right - 1.5 > origin.right;\n\n      // return (\n      //    (pointer.right - 2) >= origin.left && (pointer.left + 2) <= origin.right\n      // )\n      // return !(\n      //    pointer.top > origin.bottom ||\n      //    pointer.right < origin.left ||\n      //    pointer.bottom < origin.top ||\n      //    pointer.left > origin.right)\n    }\n\n    return false;\n  };\n  boolzhan = isInRange();\n  console.log({\n    position\n  });\n  tunerValue.set({\n    position\n  });\n\n  // if (boolzhan && (c == 0)) {\n  //    c++;\n  //    playAudio();\n  // } else {\n  //    c = 0;\n  // }\n\n  // if (boolzhan) playAudio();\n  // boolzhan = false;\n  // history = boolzhan;\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      id: \"asdlaldf\",\n      children: [/*#__PURE__*/_jsxDEV(BackWaves, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Dock, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"area\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          ref: originRef,\n          className: `origin ${boolzhan && ' theAnswer'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: pointerRef,\n          className: \"pointer\",\n          style: {\n            left: position\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inmain\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn d-note${dColorClass}`,\n            onClick: () => {\n              setNote(\"D\");\n            },\n            children: \"\\u0440\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn g-note${gColorClass}`,\n            onClick: () => {\n              setNote(\"G\");\n            },\n            children: \"\\u0441\\u043E\\u043B\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"center\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"pic\",\n              src: \"dombyra0.png\",\n              alt: \"dombyra pic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"numbers\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pitch\",\n        children: pitch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clarity\",\n        children: clarity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n};\n_s(Dombyra, \"3azpUEav501gSG0w49mfaS/Tjyc=\");\n_c = Dombyra;\nvar _c;\n$RefreshReg$(_c, \"Dombyra\");","map":{"version":3,"names":["PitchDetector","useEffect","useState","useRef","Dock","BackWaves","tunerValue","global","minClarityPercent","minPitch","maxPitch","absThr","nAbsThr","threshold","nthrshld","audio","Audio","playAudio","play","console","log","set","err","c","boolzhan","Dombyra","pitch","setPitch","clarity","setClarity","note","setNote","diffG","setDiffG","diffD","setDiffD","position","setPosition","updatePitch","analyserNode","detector","input","sampleRate","getFloatTimeDomainData","findPitch","matchesConditions","frq","Math","round","abs","interval","navigator","mediaDevices","getUserMedia","then","stream","audioContext","window","AudioContext","createAnalyser","createMediaStreamSource","connect","forFloat32Array","fftSize","Float32Array","inputLength","setInterval","clearTimeout","dColorClass","gColorClass","timeout","absDiff","parseInt","pointerRef","originRef","isInRange","current","pointer","getBoundingClientRect","origin","left","right"],"sources":["/home/zhadyra/qazaq_aspap/client/src/pages/tuner/components/Dombyra/dombyra.jsx"],"sourcesContent":["import { PitchDetector } from \"pitchy\";\nimport { useEffect, useState, useRef } from \"react\";\nimport './style.css';\n\nimport { Dock } from \"../Dock/dock\"\nimport { BackWaves } from \"../BackWaves/back-waves\";\n\n// import { useWindowSize } from \"../../hooks/useWindowsSize\"\n\nimport {tunerValue} from \"../../../../firebase\";\n\n// let position = \"30%\";\n\nlet global = 100;\n\n\nlet minClarityPercent = 95;\nlet [minPitch, maxPitch] = [60, 10000];\nconst absThr = 0.5;\nconst nAbsThr = -1*absThr;\nconst threshold = 1;\nconst nthrshld = -1*threshold;\n\nconst audio = new Audio(\"tuner.mp3\");\n\nconst playAudio = async () => {\n   try {\n      await audio.play();\n      console.log(\"Playing audio\");\n      tunerValue.set(\"Alright!\")\n   } catch (err) {\n      console.log(\"Failed to play, error: \" + err);\n      tunerValue.set(\"Failed to play, error\")\n   }\n}\n\nlet c = 0;\nlet boolzhan = true;\n\nexport const Dombyra = () => {\n   // const {width, height} = useWindowSize();\n\n   // console.log(height)\n   // const [pitch, clairty, ] = useInstrument(...);\n   const [pitch, setPitch] = useState(0);\n   const [clarity, setClarity] = useState(0);\n\n   const [note, setNote] = useState(\"G\");\n\n   const [diffG, setDiffG] = useState(0);\n   const [diffD, setDiffD] = useState(0);\n   const[ position, setPosition] = useState(\"calc(50% - 3px)\");\n   \n\n   const updatePitch = (analyserNode, detector, input, sampleRate) => {\n      analyserNode.getFloatTimeDomainData(input);\n      const [pitch, clarity] = detector.findPitch(input, sampleRate);\n\n      const matchesConditions = (pitch >= minPitch && pitch <= maxPitch && 100 * clarity >= minClarityPercent);\n      \n      if (matchesConditions) {\n         const frq = Math.round(pitch * 10) / 10;\n         // console.log((Math.abs(frq - global)));\n\n         if (Math.abs(frq - global) < 200) {\n            \n            setPitch(frq);\n            setDiffG(frq - 195.9977);\n            setDiffD(frq - 146.8324);\n            setClarity(Math.round(clarity * 100));\n            global = frq;\n         } else {\n            // console.log(\"difference is too much\");\n         }\n      }\n\n      // setTimeout(() => updatePitch(analyserNode, detector, input, sampleRate), 150);\n      // return () => {\n         // console.log(\"RETURNED\")\n         // clearTimeout(interval)\n      // }\n   }\n\n\n   \n   \n   useEffect(() => {\n      // const audioContext = new window.AudioContext();\n      // const analyserNode = audioContext.createAnalyser();\n      let interval;\n\n      navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\n         const audioContext = new window.AudioContext();\n         const analyserNode = audioContext.createAnalyser();\n         audioContext.createMediaStreamSource(stream).connect(analyserNode);\n         const detector = PitchDetector.forFloat32Array(analyserNode.fftSize);\n         const input = new Float32Array(detector.inputLength);\n\n         // global = detector.findPitch(input, audioContext.sampleRate)[0];\n\n         interval = setInterval(() => { \n            updatePitch(analyserNode, detector, input, audioContext.sampleRate)\n         }, 150);\n      });\n\n      return () => {\n         console.log(\"RETURNED\");\n         tunerValue.set(\"RETURNED\")\n         clearTimeout(interval);\n      }\n      \n   }, []);\n   \n\n   let dColorClass = (note === \"D\") ? \" green\" : \"\";\n   let gColorClass = (note === \"G\") ? \" green\" : \"\";\n\n   \n\n   useEffect(() => {\n      let timeout;\n      \n      if (note == \"G\" && diffG) {\n         // console.log(\"in G\")\n         // console.log(diffG)\n         const absDiff = Math.abs(diffG);\n         // console.log(\"G[ \" + absDiff + \" ]\")\n         if (absDiff <= absThr) {\n            // console.log(\"in G exact\")\n            setPosition('calc(50% - 3px)');\n\n            \n            if (boolzhan) {playAudio();}\n\n         } else if (diffG < nAbsThr && diffG > nthrshld) {\n            // console.log(\"in G near LESS\")\n            setPosition(`calc(50% - 3px - 5px - ${ parseInt(absDiff, 0) }px)`);\n         } else if (diffG > absThr && diffG < threshold) {\n            // console.log(\"in G near MORE\")\n            setPosition(`calc(50% - 3px + 5px + ${ parseInt(absDiff, 0) }px)`);\n         } else if (diffG <= nthrshld) {\n            // console.log(\"in G LESS\")\n            setPosition(`calc(50% - 3px - 10px - ${ parseInt(absDiff, 0) }px)`);\n         } else if (diffG >= threshold) {\n            // console.log(\"in G MORE\")\n            setPosition(`calc(50% - 3px + 10px + ${ parseInt(absDiff, 0) }px)`);\n         }\n      } \n      if (note == \"D\" && diffD) {\n         // console.log(\"in D\")\n         // console.log(diffD)\n         const absDiff = Math.abs(diffD);\n         // console.log(\"D[ \" + absDiff + \" ]\")\n         if (absDiff <= absThr) {\n            // console.log(\"in D exact\")\n            setPosition('calc(50% - 3px)');\n            // changeLineColor();\n            if (boolzhan) {playAudio();}\n         \n            // clearTimeout(timer);\n            \n            // lineColorClass = \"\";\n         } else if (diffD < nAbsThr && diffD > nthrshld) {\n            // console.log(\"in D near LESS\")\n            setPosition(`calc(50% - 3px - 5px - ${ parseInt(absDiff, 0) }px)`);\n         } else if (diffD > absThr && diffD < threshold) {\n            // console.log(\"in D near MORE\")\n            setPosition(`calc(50% - 3px + 5px + ${ parseInt(absDiff, 0) }px)`);\n         }else if (diffD <= nthrshld) {\n            // console.log(\"in D LESS\")\n            setPosition(`calc(50% - 3px - 10px - ${ parseInt(absDiff, 0) }px)`);\n         } else if (diffD >= threshold) {\n            // console.log(\"in D MORE\")\n            setPosition(`calc(50% - 3px + 10px + ${ parseInt(absDiff, 0) }px)`);\n         }\n         \n      }\n\n   }, [note, diffG, diffD]);\n\n\n   const pointerRef = useRef();\n   const originRef = useRef();\n\n   \n\n   const isInRange = () => {\n      if (pointerRef.current && originRef.current) {\n         const pointer = pointerRef.current.getBoundingClientRect();\n         const origin = originRef.current.getBoundingClientRect();\n\n         // return ((pointer.left + 3) == (origin.left + 1));\n\n         return (\n            ((pointer.left + 1.5) < origin.left) && ((pointer.right - 1.5) > origin.right)\n         )\n\n         // return (\n         //    (pointer.right - 2) >= origin.left && (pointer.left + 2) <= origin.right\n         // )\n         // return !(\n         //    pointer.top > origin.bottom ||\n         //    pointer.right < origin.left ||\n         //    pointer.bottom < origin.top ||\n         //    pointer.left > origin.right)\n\n      }\n      return false;\n   }\n\n\n   boolzhan = isInRange();\n   console.log({position});\n   tunerValue.set({position});\n\n   \n   // if (boolzhan && (c == 0)) {\n   //    c++;\n   //    playAudio();\n   // } else {\n   //    c = 0;\n   // }\n\n   // if (boolzhan) playAudio();\n   // boolzhan = false;\n   // history = boolzhan;\n\n   return (\n      <>\n         \n\n         <div className=\"container\" id=\"asdlaldf\">\n            <BackWaves/>\n            <Dock/>\n            <div className=\"area\">\n               <div ref={originRef} className={`origin ${ boolzhan && ' theAnswer'}`}></div>\n               <div ref={pointerRef} className=\"pointer\" style={{ left: position }}></div>\n            </div>\n            <div className=\"main\">\n      \n               <div className=\"inmain\">\n                  <button\n                     className={`btn d-note${dColorClass}`} \n                     onClick={() => {\n                        setNote(\"D\");\n                     }}\n                  >ре</button>\n                  <button\n                     className={`btn g-note${gColorClass}`} \n                     onClick={() => {\n                        setNote(\"G\");\n                     }}\n                  >соль</button>\n                  <div className=\"center\">\n                     <img className=\"pic\" src=\"dombyra0.png\" alt=\"dombyra pic\" />\n                  </div>\n               </div>\n                  \n            </div>\n\n            {/* <div className=\"prefooter\">\n\n            </div> */}\n\n         </div>\n         <div className=\"numbers\">\n            <div className=\"pitch\">{pitch}</div>\n            <div className=\"clarity\">{clarity}</div>\n         </div>\n         \n\n      </>\n   );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}